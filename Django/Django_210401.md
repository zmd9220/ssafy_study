# Django_210401



## Annotate

- 우리가 사용하는 모델 필드들은 사전에 정의해야만 사용할 수 있고, 기본 모델형으로 인스턴스를 가져오면 필요 없는 모든 필드들을 다 가져오게 된다.
- 내가 가지고 오고 싶은 필드들(기존 속성들을 기반으로 가공하여 원하는 속성으로 변경도 가능 - 대표적으로 count, max 등의 결과값)만 관리하는 관리자를 만들고 그것을 임시모델로 하여 객체를 생성하는 것
- 내가 원하는 필드들만 골라서 가져올 수 있는 방법

### 질문

1) annottate는 모델을 수정할 필요가 없다는 장점인거 같은데, 혹시 DB에는 어떤 형태로 저장되나요? 저장되지않는다면 result는 정의되어있는 def함수안에서만 조회 할 수 있는건가요? 

2) symmetrical = True면 User1가 User2를 팔로우하면 User2의 followings에 User1이 자동으로 생성되는 건가요? 

###  답변 

 1. DB에 테이블을 새롭게 만들지 않고, 기존 테이블에서 annotate에 정의한 필드만 가져오는 문법입니다. 예시에서 보여드린 result는 view 함수에서 사용하도록 설계 되었으며 일회성으로 함수 안에서 생성해서 조회하고 함수 호출이 종료되면 사라집니다. 
  2.  맞습니다.



## M:N 모델에서 self로 사용했을 때 참조, 역참조 헷갈리면..

- 각각의 참조하는 위치에 따라서 이름만 다르게 해서 가져오기 (만약 디폴트_set으로 한다면 이해하기 어려울 수 있음)
- 현재 내가 참조를 하고 있는 부분을 가져오고 싶다!(참조) -> 모델에서 지정한 이름(해당 필드명)
- 나를 참조하는 친구들을 가져오고 싶다!(역참조) -> 모델에서 역참조 하는 이름 (related_name 지정시 해당 이름 아니면 디폴트_set)